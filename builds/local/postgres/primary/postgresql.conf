# =============================================================================
# PostgreSQL 16 - PRIMARY SERVER CONFIGURATION
# =============================================================================

#------------------------------------------------------------------------------
# CONNECTIONS
#------------------------------------------------------------------------------
listen_addresses = '*'
port = 5432
max_connections = 100

#------------------------------------------------------------------------------
# WRITE-AHEAD LOG (WAL)
#------------------------------------------------------------------------------
# replica = enough for streaming replication
wal_level = replica

# How much WAL to keep (safety if replica disconnects)
wal_keep_size = 256MB

#------------------------------------------------------------------------------
# REPLICATION - SENDING SERVER
#------------------------------------------------------------------------------
# Max WAL sender processes (1 per replica + backup slots)
max_wal_senders = 3

# Replication slots prevent WAL deletion until replica confirms
max_replication_slots = 3

# Allow replica to serve read queries
hot_standby = on

#------------------------------------------------------------------------------
# LOGGING
#------------------------------------------------------------------------------
log_destination = 'stderr'
logging_collector = off
log_line_prefix = '%t [%p]: '
log_statement = 'ddl'
log_replication_commands = on